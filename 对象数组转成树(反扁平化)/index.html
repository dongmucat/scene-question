<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <pre>
    // 例如将 input 转成output的形式
    let input = [
        {
            id: 1, val: '学校', parentId: null
        }, {
            id: 2, val: '班级1', parentId: 1
        }, {
            id: 3, val: '班级2', parentId: 1
        }, {
            id: 4, val: '学生1', parentId: 2
        }, {
            id: 5, val: '学生2', parentId: 2
        }, {
            id: 6, val: '学生3', parentId: 3
        },
    ]
     
    let output = {
        id: 1,
        val: '学校',
        children: [{
            id: 2,
            val: '班级1',
            children: [
                {
                    id: 4,
                    val: '学生1',
                    children: []
                },
                {
                    id: 5,
                    val: '学生2',
                    children: []
                }
            ]
        }, {
            id: 3,
            val: '班级2',
            children: [{
                id: 6,
                val: '学生3',
                children: []
            }]
        }]
    }
</pre>
</body>

<script>
    let input = [{
        id: 1,
        val: '学校',
        parentId: null
    }, {
        id: 2,
        val: '班级1',
        parentId: 1
    }, {
        id: 3,
        val: '班级2',
        parentId: 1
    }, {
        id: 4,
        val: '学生1',
        parentId: 2
    }, {
        id: 5,
        val: '学生2',
        parentId: 2
    }, {
        id: 6,
        val: '学生3',
        parentId: 3
    }, ]

    /* 使用递归的方法 */
    function arrayToTree(arr) {
        /* 删除，取出第一个头节点 */
        let root = arr.shift()
        let tree = {
            id: root.id,
            val: root.val,
            children: arr.length > 0 ? toTree(root.id, arr) : []
        }
        return tree
    }

    function toTree(parentId, arr) {
        /* 取出数组长度 */
        let children = []
        const len = arr.length
        /* 遍历整个数组 */
        for (let index = 0; index < len; index++) {
            /* 如果对上了父亲 */
            let node = arr[index]
            if (parentId === node.parentId) {
                /* 注意这里要用push */
                children.push({
                    id: node.id,
                    val: node.val,
                    children: toTree(node.id, arr)
                })
            }
        }

        return children
    }

    console.log(arrayToTree(input))
</script>

</html>